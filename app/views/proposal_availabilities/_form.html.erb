<%# locals:(proposal_availability:, availabilities:, game_proposal: nil) %>
<%= form_with(model: proposal_availability.new_record? ? [game_proposal, proposal_availability] : proposal_availability) do |form| %>
  <% if proposal_availability.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(proposal_availability.errors.count, "error") %> prohibited this proposal_availability from being saved:</h2>

      <ul>
        <% proposal_availability.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <div>
      <%= form.collection_select :availability_id, availabilities, :id, :name, {}, data:{action: "change->availability-selection#setCalendarAvailability", availability_selection_target:"availabilitySelectInput"} %>
    </div>
  </div>

  <div>
    <%= form.hidden_field :user_id, value: Current.user.id %>
  </div>

  <div>
    <%= form.hidden_field :game_proposal_id, value: proposal_availability.game_proposal_id %>
  </div>

  <div>
    <%= form.submit "Set Availability for Proposal: #{proposal_availability.game_proposal.game_name}" %>
  </div>
<% end %>